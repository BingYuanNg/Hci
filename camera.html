<html>
  <head>
    <meta charset="UTF-8">
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="font-awesome-4.6.3/css/font-awesome.min.css">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=yes">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="true">



    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>

    <!-- oleo script font -->
    <link href="https://fonts.googleapis.com/css?family=Oleo+Script" rel="stylesheet">

  </head>
  <style type="text/css">
      html,body {
        height: 100%;
        overflow: hidden;
      }
      #video {
        height:95%;
        position: relative;
        top:0;
        left: 0;
        right:0;
      }
      .footer {
        position:absolute;
        height:20vw;
        /*background-color: rgba(0,0,0,0.8);*/
        bottom:0;
        left:0;
        right:0;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .back-button li{
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .fa-chevron-left {
        padding-top:15px;
      }

      button {
        background-color:white;
      }
      .snap-button {
        height :15vw;
        width :15vw;
        border-radius: 50%;
      }

      .brand-logo {
        font-family: 'Oleo Script', cursive;
      }
  </style>
  <body>


    <!-- side navigation -->
    <nav>
      <div class="nav-wrapper container">
        <a href="#!" class="brand-logo">Camera</a>
        <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
        <ul class="right hide-on-med-and-down">
          <li><a href="sass.html">Sass</a></li>
          <li><a href="badges.html">Components</a></li>
          <li><a href="collapsible.html">Javascript</a></li>
          <li><a href="mobile.html">Mobile</a></li>
        </ul>
        <ul class="side-nav" id="mobile-demo">
          <li><a href="sass.html">Sass</a></li>
          <li><a href="badges.html">Components</a></li>
          <li><a href="collapsible.html">Javascript</a></li>
          <li><a href="mobile.html">Mobile</a></li>
        </ul>
      </div>
    </nav>






    <video id="video" class="center" witdh="100%" autoplay></video>
    <div class="footer">
        <center>
            <div id="snap">
                <a href="result.html" class="btn-floating btn-large waves-effect waves-light red"><i class="fa fa-camera"></i></a>
            </div>
        </center>
    </div>
    <canvas id="canvas"></canvas>

  <div class="select">
    <label for="videoSource">Video source: </label><select id="videoSource"></select>
  </div>




    <script>
          
    var videoElement = document.querySelector('video');
    var videoSelect = document.querySelector('select#videoSource');

    navigator.getUserMedia = navigator.getUserMedia ||
      navigator.webkitGetUserMedia || navigator.mozGetUserMedia;

    function gotSources(sourceInfos) {
      for (var i = 0; i !== sourceInfos.length; ++i) {
        var sourceInfo = sourceInfos[i];
        var option = document.createElement('option');
        option.value = sourceInfo.id;
        if (sourceInfo.kind === 'video') {
          option.text = sourceInfo.label || 'camera ' + (videoSelect.length + 1);
          videoSelect.appendChild(option);
        } else {
          console.log('Some other kind of source: ', sourceInfo);
        }
      }
    }

    if (typeof MediaStreamTrack === 'undefined'){
      alert('This browser does not support MediaStreamTrack.\n\nTry Chrome Canary.');
    } else {
      MediaStreamTrack.getSources(gotSources);
    }


    function successCallback(stream) {
      window.stream = stream; // make stream available to console
      videoElement.src = window.URL.createObjectURL(stream);
      videoElement.play();
    }

    function errorCallback(error){
      console.log('navigator.getUserMedia error: ', error);
    }

    function start(){
      if (!!window.stream) {
        videoElement.src = null;
        window.stream.stop();
      }
      var videoSource = videoSelect.value;
      var constraints = {
        video: {
          optional: [{sourceId: videoSource}]
        }
      };
      navigator.getUserMedia(constraints, successCallback, errorCallback);
    }

    videoSelect.onchange = start;

    start();
      // Grab elements, create settings, etc.
      // var video = document.getElementById('video');

      // // Get access to the camera!
      // if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
      //     // Not adding `{ audio: true }` since we only want video now
      //     //
      //     navigator.mediaDevices.getUserMedia({ video: true } ).then(function(stream) {
      //         video.src = window.URL.createObjectURL(stream);
      //         video.play();
      //     });
      // }




       $(".button-collapse").sideNav();
      /* Legacy code below: getUserMedia
      else if(navigator.getUserMedia) { // Standard
          navigator.getUserMedia({ video: true }, function(stream) {
              video.src = stream;
              video.play();
          }, errBack);
      } else if(navigator.webkitGetUserMedia) { // WebKit-prefixed
          navigator.webkitGetUserMedia({ video: true }, function(stream){
              video.src = window.webkitURL.createObjectURL(stream);
              video.play();
          }, errBack);
      } else if(navigator.mozGetUserMedia) { // Mozilla-prefixed
          navigator.mozGetUserMedia({ video: true }, function(stream){
              video.src = window.URL.createObjectURL(stream);
              video.play();
          }, errBack);
      }
      */
    </script>
  </body>
</html>