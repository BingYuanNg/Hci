<html>
  <head>
    <meta charset="UTF-8">
    <title>title</title>

    <link rel="stylesheet" type="text/css" href="css/materialize.min.css">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="font-awesome-4.6.3/css/font-awesome.min.css">

    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=yes">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <meta name="HandheldFriendly" content="true">

    <script src="jquery.min.js"></script>

    <script type="text/javascript" src="js/materialize.min.js"></script>

    <!-- oleo script font -->
    <link href="https://fonts.googleapis.com/css?family=Oleo+Script" rel="stylesheet">

  </head>
  <style type="text/css">
      html,body {
        height: 100%;
        overflow: hidden;
      }
      #video {
        height:95%;
        position: relative;
        top:0;
        left: 0;
        right:0;
      }
      .footer {
        position:absolute;
        height:20vw;
        /*background-color: rgba(0,0,0,0.8);*/
        bottom:0;
        left:0;
        right:0;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .back-button li{
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .fa-chevron-left {
        padding-top:15px;
      }

      button {
        background-color:white;
      }
      .snap-button {
        height :15vw;
        width :15vw;
        border-radius: 50%;
      }

      .brand-logo {
        font-family: 'Oleo Script', cursive;
      }

      .switch {
        position: absolute;
        z-index: 99;
      }
  </style>
  <body>







    <!-- flash toggle -->
    <div class="switch">
      <label>
        Off
        <input type="checkbox">
        <span class="lever"></span>
        On
      </label>
    </div>






    <!-- side navigation -->
    <nav>
      <div class="nav-wrapper container">
        <a href="#!" class="brand-logo">Camera</a>
        <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
        <ul class="right hide-on-med-and-down">
          <li><a href="index.html" class="waves-effect waves-teal">Home</a></li>
          <li><a href="camera.html" class="waves-effect waves-teal">Camera</a></li>
          <li><a href="quiz.html" class="waves-effect waves-teal">Quiz</a></li>
          <li><a href="history.html" class="waves-effect waves-teal">History</a></li>
          <li><a href="#">Settings</a></li>
          <li><a href="#">About</a></li>
        </ul>
        <ul class="side-nav" id="mobile-demo">
          <!-- <li class="logo container center">
            <a href="#" class="logo waves-effect waves-teal"><img src="img/flowerworks.png" height="100" width="100"></a>
          </li> -->
          <div class="container center">
            <img src="img/flowerworks.png" height="100" width="100">
          </div>
          <li><a href="index.html" class="waves-effect waves-teal">Home</a></li>
          <li><a href="camera.html" class="waves-effect waves-teal">Camera</a></li>
          <li><a href="quiz.html" class="waves-effect waves-teal">Quiz</a></li>
          <li><a href="history.html" class="waves-effect waves-teal">History</a></li>
          <li><a href="#">Settings</a></li>
          <li><a href="#">About</a></li>
        </ul>
      </div>
    </nav>





    <!-- viewfinder -->
    <video id="video" class="center" witdh="100%" autoplay></video>
    <div class="footer">
        <center>
            <div id="snap">
                <a href="result.html" class="btn-floating btn-large red"><i class="fa fa-camera"></i></a>
            </div>
        </center>
    </div>
    <canvas id="canvas"></canvas>






    <div class="select">
      <label for="videoSource">Video source: </label><select id="videoSource"></select>
    </div>




    <script>
    var sources = [];
    $(document).ready(function($) {
      var videoElement = document.querySelector('video');
      var videoSelect = $('select#videoSource');

      navigator.getUserMedia = navigator.getUserMedia ||
        navigator.webkitGetUserMedia || navigator.mozGetUserMedia;

      function gotSources(sourceInfos) {
        for (var i = 0; i !== sourceInfos.length; ++i) {
          var sourceInfo = sourceInfos[i];
          var option = document.createElement('option');
          option.value = sourceInfo.id;
          if (sourceInfo.kind === 'video') {
            option.text = 'camera ' + (videoSelect.length + 1);
            videoSelect.prepend(option);

            // ck
            sources.push(sourceInfo);
            console.log(sourceInfo);
          } else {
            console.log('Some other kind of source: ', sourceInfo);
          }
        }
      }

      // ck
      console.log(sources);


      if (typeof MediaStreamTrack === 'undefined'){
        alert('This browser does not support MediaStreamTrack.\n\nTry Chrome Canary.');
      } else {
        MediaStreamTrack.getSources(gotSources);
      }


      function successCallback(stream) {
        window.stream = stream; // make stream available to console
        videoElement.src = window.URL.createObjectURL(stream);
      }

      function errorCallback(error){
        console.log('navigator.getUserMedia error: ', error);
      }

      function start(){
        if (!!window.stream) {
          videoElement.src = null;
          window.stream.stop();
        }
        var videoSource = videoSelect.value;
        var constraints = {
          video: {
            optional: [{sourceId: videoSource}]
          }
        };
        navigator.getUserMedia(constraints, successCallback, errorCallback);
      }
      console.log(videoSource);
      videoSelect.onchange = start;

      start();
        // Grab elements, create settings, etc.
        // var video = document.getElementById('video');

        // // Get access to the camera!
        // if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        //     // Not adding `{ audio: true }` since we only want video now
        //     //
        //     navigator.mediaDevices.getUserMedia({ video: true } ).then(function(stream) {
        //         video.src = window.URL.createObjectURL(stream);
        //         video.play();
        //     });
        // }




       $(".button-collapse").sideNav();
      /* Legacy code below: getUserMedia
      else if(navigator.getUserMedia) { // Standard
          navigator.getUserMedia({ video: true }, function(stream) {
              video.src = stream;
              video.play();
          }, errBack);
      } else if(navigator.webkitGetUserMedia) { // WebKit-prefixed
          navigator.webkitGetUserMedia({ video: true }, function(stream){
              video.src = window.webkitURL.createObjectURL(stream);
              video.play();
          }, errBack);
      } else if(navigator.mozGetUserMedia) { // Mozilla-prefixed
          navigator.mozGetUserMedia({ video: true }, function(stream){
              video.src = window.URL.createObjectURL(stream);
              video.play();
          }, errBack);
      }
      */

    });
    </script>
  </body>
</html>